# Todo App Demo

**重要**:
- 本專案以根目錄的 TODO.md 作為唯一真實來源（SoT）。在每個步驟結尾，必須：
  1) 回傳一個完整覆蓋的 `TODO.md` 檔案（使用多檔案區塊：```path=TODO.md ...```），
  2) 將該步的核取方塊改為 [x]，
  3) 在「進度日誌」區塊追加一行摘要。
- 如果沒有 TODO.md，請先透過使用者的 Request 和 `todo-planner` 建立 `TODO.md`

我們想打造一個小巧的待辦管理工具：後端用 FastAPI + SQLModel，前端用 Streamlit，讓大家能快速記錄、更新、篩選每天的任務，順手就會想開著用。

## 主要目標
- 新增、編輯、刪除待辦事項要順手，欄位就維持常見的標題、描述、狀態、優先度、期限，旁邊顯示建立與更新時間。
- 清單要能用狀態、標籤、文字關鍵字去篩選，再配上排序和分頁，列表不要一次塞太多資料。
- 點一下就能把待辦從「還在做」切成「完成」，或反過來。
- 若一次想調整多筆任務（例如把三個任務都改成高優先度），要能勾選後批次處理。
- 前端用 Streamlit 做個簡單介面：左邊側欄放篩選器，中間顯示列表，底下放新增與編輯表單，遇到錯誤時能看到友善訊息。

## 我們對資料的期待
- 每筆待辦要有 ID、標題、描述、狀態、優先度、到期日、標籤，以及建立/更新時間。
- 狀態先用 todo / in_progress / done，優先度用 low / medium / high；預設 todo、medium 就好。
- 標籤希望能支援多個、大小寫不敏感、不要重複；超過十個或太長就先擋下來。
- 到期日如果比建立時間還早就提醒使用者重新填。

## 後端安排
- 維持 FastAPI + SQLModel 的基本骨架：把 models、schemas、crud、routers 拆開，方便維護。
- REST API 先做這幾支：`/health`；`/todos` 的 GET/POST；`/todos/{id}` 的 GET/PATCH/DELETE；`/todos/{id}/toggle`；還有支援一次更新多筆的 `/todos/bulk`。
- 查詢要支援篩選、文字搜尋（標題/描述不分大小寫）、排序（至少 created_at、updated_at、due_date、priority），以及 page / page_size。
- 如果找不到資料回 404，資料格式錯誤就丟一個一致的 422 錯誤格式，讓前端有地方顯示。

## 前端想像畫面
- Streamlit app 有清楚的清單和側欄篩選器，列表中能直接勾選多筆或點欄位編輯。
- 批次操作用對話框或小表單輸入要改的內容，送出後重新整理列表。
- 新增/編輯表單顯示欄位錯誤訊息，成功後清空表單並刷新。
- 頁面底部可以展示目前的篩選條件、分頁狀態，讓人知道自己看的是哪一段資料。

## 測試 & 範例
- 用 pytest + FastAPI 的 TestClient，針對常見流程（新增、查詢、排序、更新、批次、切換狀態）寫幾個代表案例。
- 至少準備一組成功回應和一組錯誤回應的 JSON 範例，讓前後端對齊。

## 完成交付
- 最後整理一份 README：怎麼安裝套件、啟動後端 (`uvicorn server.main:app --reload`)、前端 (`streamlit run client/app.py`)、怎麼跑測試 (`pytest -q`)。
- 提供一個 `start.sh`，一次啟動前後端。
- 如果時間允許，可以再補一些 nice-to-have（像是紀錄操作歷史、標籤管理頁），但先把基本流程做順就行。
